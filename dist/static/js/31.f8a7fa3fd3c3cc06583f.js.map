{"version":3,"sources":["webpack:///src/modular/record/staff.vue","webpack:///./src/modular/record/staff.vue?1666","webpack:///./src/modular/record/staff.vue"],"names":["staff","components","data","_this","this","value","time","levelType","exportLink","linkdo","typeList","label","columns","title","width","key","className","render","h","params","list","index","userName","userCode","DATAS","RECORD_USER_EVENT_TYPE","type","loadingTable","loadingBtn","page","pageNo","pagePages","pageItems","methods","extends_default","searchListData","queryList","queryListParam","pageNum","pageChange","curPage","exportOrder","$refs","exportForm","submit","obj","_this2","param","pageSize","createTimeBegin","moment_default","format","createTimeEnd","callback","response","code","totalNum","Object","vuex_esm","types","setMailRecordRead","computed","beforeMount","record_staff","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","target","method","accept-charset","action","placeholder","model","$$v","expression","staticStyle","on","on-change","$event","_l","item","_s","colspan","loading","click","href","total","current","show-elevator","show-total","prev-text","next-text","page-size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/31.f8a7fa3fd3c3cc06583f.js","sourcesContent":["<template lang=\"pug\">\r\n.contRecordDomain\r\n  <!-- 标题区 -->\r\n  h1.pageTitle.clear 员工监控日志\r\n  .secFilter\r\n    form.filterWrap(ref=\"exportForm\",target=\"_blank\" method=\"post\" accept-charset=\"utf-8\" :action=\"exportLink\")\r\n      table\r\n        tr.row1\r\n          td.td1\r\n            span.n 搜索：\r\n            .inputWrap\r\n              <Input v-model=\"value\" placeholder=\"请输入员工\" />\r\n          td.td2\r\n            span.n 日志记录时间：\r\n            .inputWrap\r\n              DatePicker(type=\"daterange\",placeholder=\"全部\",v-model=\"time\",format=\"yyyy-MM-dd\",@on-change=\"time=$event\",style=\"width:100%\")\r\n          td.td3\r\n            span.n 通知类型：\r\n            .inputWrap\r\n              Select(v-model=\"levelType\")\r\n                Option(v-for=\"item in typeList\",:value=\"item.value\",:key=\"item.value\") {{ item.label }}\r\n          td.tdBtn(colspan=\"3\")\r\n            Button(type=\"primary\", @click=\"searchListData\",:loading=\"loadingBtn\") 查询\r\n            a(href=\"javascript:;\",class=\"exportOrder\",@click=\"exportOrder\") 导出日志\r\n  .secMain\r\n    <!-- 列表主体 -->\r\n    .secTable\r\n      <Table :columns=\"columns\" :data=\"list\" :loading=\"loadingTable\"></Table>\r\n\r\n  <!-- 翻页区 -->\r\n  Page(:total=\"page.pageItems\",:current=\"page.pageNo\",show-elevator,show-total,prev-text=\"上一页\",next-text=\"下一页\",@on-change=\"pageChange\",:page-size=20)\r\n\r\n</template>\r\n\r\n<script>\r\nimport {mapActions} from 'vuex'\r\nimport * as types from '@/store/types'\r\nimport * as links from '@/global/linkdo.js'\r\nimport moment from 'moment'\r\nexport default {\r\n  components: {\r\n  },\r\n  data () {\r\n    return {\r\n      value: '',\r\n      time: '',\r\n      levelType: '',\r\n      exportLink: links.EXPORT_MONITOR_USER_LOG,\r\n      typeList: [\r\n        {\r\n          value: '',\r\n          label: '全部'\r\n        },\r\n        {\r\n          value: 1,\r\n          label: '普通'\r\n        },\r\n        {\r\n          value: 2,\r\n          label: '重要'\r\n        }\r\n      ],\r\n      columns: [\r\n        {\r\n          title: '时间',\r\n          width: 150,\r\n          key: 'createTime',\r\n          className: 'col1'\r\n        },\r\n        {\r\n          title: '员工',\r\n          width: 150,\r\n          key: 'userId',\r\n          className: 'col2',\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h('span', {}, `${this.list[params.index].userName}(${this.list[params.index].userCode})`)\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          title: '事件类型',\r\n          width: 200,\r\n          key: 'type',\r\n          className: 'col3',\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h('span', {}, this.DATAS.RECORD_USER_EVENT_TYPE[this.list[params.index].type])\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          title: '日志详情',\r\n          key: 'content',\r\n          className: 'col4'\r\n        }\r\n      ],\r\n      list: [],\r\n      loadingTable: true,\r\n      loadingBtn: false,\r\n      page: {\r\n        pageNo: 1,\r\n        pagePages: 1,\r\n        pageItems: 1\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    searchListData () {\r\n      // 查询数据\r\n      this.queryList(this.queryListParam({pageNum: 1}))\r\n    },\r\n    pageChange: function (curPage) {\r\n      // 根据当前页获取数据\r\n      this.queryList(this.queryListParam({pageNum: curPage}))\r\n    },\r\n    exportOrder () {\r\n      this.$refs.exportForm.submit()\r\n    },\r\n    queryListParam (obj) {\r\n      this.page.pageNo = obj.pageNum\r\n      this.loadingBtn = true\r\n      this.loadingTable = true\r\n\r\n      let params = {\r\n        param: {\r\n          pageNum: obj.pageNum,\r\n          pageSize: 20,\r\n          userName: this.value,\r\n          createTimeBegin: this.time[0] !== '' ? moment(this.time[0]).format('YYYY-MM-DD') + ' 00:00:00' : '',\r\n          createTimeEnd: this.time[1] !== '' ? moment(this.time[1]).format('YYYY-MM-DD') + ' 23:59:59' : '',\r\n          levelType: this.levelType\r\n        },\r\n        callback: (response) => {\r\n          this.loadingBtn = false\r\n          this.loadingTable = false\r\n          if (!response) {\r\n            return false\r\n          }\r\n          if (response.data.code === '1000') {\r\n            this.list = response.data.data.list\r\n            this.page.pageItems = response.data.data.totalNum\r\n          } else {\r\n          }\r\n        }\r\n      }\r\n      return params\r\n    },\r\n    ...mapActions({\r\n      queryList: types.QUERY_USER_MONITOR_MANAGE,\r\n      setMailRecordRead: types.SET_MAIL_RECORD_READ\r\n    })\r\n  },\r\n  computed: {\r\n  },\r\n  beforeMount () {\r\n    this.queryList(this.queryListParam({pageNum: 1}))\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.contRecordDomain .td1,\r\n.contRecordDomain .td2,\r\n.contRecordDomain .td3{\r\n  width: 28%\r\n}\r\n.contRecordDomain .tdBtn{\r\n  width: 16%;\r\n}\r\n.contRecordDomain .filterWrap td .n{\r\n  width: 90px;\r\n}\r\n.contRecordDomain .filterWrap td .inputWrap{\r\n  margin-left: 90px;\r\n}\r\n.contRecordDomain .exportOrder{\r\n  margin-left:20px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/modular/record/staff.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"contRecordDomain\"},[_c('h1',{staticClass:\"pageTitle clear\"},[_vm._v(\"员工监控日志\")]),_c('div',{staticClass:\"secFilter\"},[_c('form',{ref:\"exportForm\",staticClass:\"filterWrap\",attrs:{\"target\":\"_blank\",\"method\":\"post\",\"accept-charset\":\"utf-8\",\"action\":_vm.exportLink}},[_c('table',[_c('tr',{staticClass:\"row1\"},[_c('td',{staticClass:\"td1\"},[_c('span',{staticClass:\"n\"},[_vm._v(\"搜索：\")]),_c('div',{staticClass:\"inputWrap\"},[_c('Input',{attrs:{\"placeholder\":\"请输入员工\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('td',{staticClass:\"td2\"},[_c('span',{staticClass:\"n\"},[_vm._v(\"日志记录时间：\")]),_c('div',{staticClass:\"inputWrap\"},[_c('DatePicker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"daterange\",\"placeholder\":\"全部\",\"format\":\"yyyy-MM-dd\"},on:{\"on-change\":function($event){_vm.time=$event}},model:{value:(_vm.time),callback:function ($$v) {_vm.time=$$v},expression:\"time\"}})],1)]),_c('td',{staticClass:\"td3\"},[_c('span',{staticClass:\"n\"},[_vm._v(\"通知类型：\")]),_c('div',{staticClass:\"inputWrap\"},[_c('Select',{model:{value:(_vm.levelType),callback:function ($$v) {_vm.levelType=$$v},expression:\"levelType\"}},_vm._l((_vm.typeList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}))],1)]),_c('td',{staticClass:\"tdBtn\",attrs:{\"colspan\":\"3\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loadingBtn},on:{\"click\":_vm.searchListData}},[_vm._v(\"查询\")]),_c('a',{staticClass:\"exportOrder\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.exportOrder}},[_vm._v(\"导出日志\")])],1)])])])]),_c('div',{staticClass:\"secMain\"},[_c('div',{staticClass:\"secTable\"},[_c('Table',{attrs:{\"columns\":_vm.columns,\"data\":_vm.list,\"loading\":_vm.loadingTable}})],1)]),_c('Page',{attrs:{\"total\":_vm.page.pageItems,\"current\":_vm.page.pageNo,\"show-elevator\":\"show-elevator\",\"show-total\":\"show-total\",\"prev-text\":\"上一页\",\"next-text\":\"下一页\",\"page-size\":20},on:{\"on-change\":_vm.pageChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9a77c0ba\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modular/record/staff.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9a77c0ba\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./staff.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./staff.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./staff.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9a77c0ba\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./staff.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modular/record/staff.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}