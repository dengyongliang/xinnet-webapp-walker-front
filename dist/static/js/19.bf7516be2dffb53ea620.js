webpackJsonp([19],{"9nVB":function(t,e){},DZAN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),n=a("NYxO"),o=a("5reh"),l=a("vyg+"),r=a("naar"),c={components:{compRadio:l.a},props:{onParentmethod:{type:Function},domainIds:{type:String,default:""}},data:function(){return{loadingBtn:!1,importantList:[{value:"一般保护",label:"0"},{value:"重点保护",label:"1"}]}},methods:s()({saveForm:function(){var t=this;if(this.loadingBtn=!0,Object(r.a)([this.$refs.protectLevel])){var e={param:{protectLevel:this.$refs.protectLevel.value,domainIds:this.domainIds},callback:function(e){if(t.loadingBtn=!1,!e)return!1;"1000"===e.data.code&&(t.loadingBtn=!1,t.$Message.success("设置保护等级成功"),t.close(),t.$emit("refreshData"))}};console.log(e.param),this.setProtectLevel(e)}else this.loadingBtn=!1},close:function(){this.onParentmethod&&"function"==typeof this.onParentmethod&&this.onParentmethod()}},Object(n.b)({setProtectLevel:o._69})),computed:{},beforeMount:function(){}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"importantPop",attrs:{slot:"content"},slot:"content"},[e("comp-radio",{ref:"protectLevel",attrs:{name:"protectLevel",list:this.importantList}}),e("div",{staticClass:"popBtn"},[e("Button",{attrs:{type:"primary",loading:this.loadingBtn},on:{click:this.saveForm}},[this._v("保存")]),e("Button",{on:{click:this.close}},[this._v("取消")])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("fBNg")},"data-v-5cd1ff10",null).exports,h={components:{compWorkOrderSubmit:a("8D3A").a},props:{onClose:{type:Function},onParentmethod:{type:Function},showLock:{type:Boolean,default:!1},detailData:{type:Object,default:function(){return{data:[]}}}},data:function(){var t=this;return{refresh:!1,loadingBtn:!1,loadingTable:!1,lock:!1,drawerWorkOrderSubmit:!1,columns:[{title:"安全服务",key:"name",className:"col1",render:function(e,a){return e("div",[e("span",{},t.DATAS.SERVICE_TYPE[t.list[a.index].name])])}},{title:"服务到期时间",key:"time",className:"col2"},{title:"服务状态",key:"status",className:"col3",render:function(e,a){return e("div",[e("span",{style:{color:(i=t,0===i.list[a.index].status||2===i.list[a.index].status?"#aaa":1===i.list[a.index].status?"#46a405":void 0)}},t.DATAS[t.list[a.index].name.toUpperCase()][t.list[a.index].status])]);var i}},{title:"操作",key:"operate",className:"operate",render:function(e,a){if("renewFlag"===t.list[a.index].name){if(0===t.list[a.index].status)return e("div",[e("a",{props:{href:"javascript:;"},on:{click:function(){t.renewFun(t.list[a.index].id,1)}}},"开启")]);if(1===t.list[a.index].status)return e("div",[e("a",{props:{href:"javascript:;"},on:{click:function(){t.renewFun(t.list[a.index].id,0)}}},"关闭")])}if("updateFlag"===t.list[a.index].name){if(0===t.list[a.index].status)return e("div",[e("a",{props:{href:"javascript:;"},on:{click:function(){t.updateFun(t.list[a.index].id,1)}}},"开启")]);if(1===t.list[a.index].status)return e("div",[e("a",{props:{href:"javascript:;"},on:{click:function(){t.updateFun(t.list[a.index].id,0)}}},"关闭")])}if("backendLockFlag"===t.list[a.index].name)return e("div",[e("a",{props:{href:"javascript:;"},on:{click:function(){t.showLockFun()}}},"详情")])}}],list:[{id:0,name:"renewFlag",time:"-",status:1},{id:0,name:"updateFlag",time:"-",status:1},{id:0,name:"backendLockFlag",time:"2018-8-21",status:1}]}},methods:s()({closeDrawer:function(){this.drawerWorkOrderSubmit=!1},drawerChange:function(){},buyFun:function(t){var e=this,a={param:{jsonObj:[{domainName:this.detailData.domainName,orderGoodsType:4,orderType:"new"===t?1:2}]},callback:function(a){if(e.loadingBtn=!1,!a)return!1;"1000"===a.data.code?(a.data.type="4_"+("new"===t?1:2),a.data.jsonObj.map(function(t){t.price=t.goodsNumAndPrice[0].price+"_"+t.goodsNumAndPrice[0].unit,t.num=t.goodsNumAndPrice[0].num,t.unit=t.goodsNumAndPrice[0].unit}),e.$store.commit(o._66,a.data),e.$router.push({path:"/payConfirm"})):"100"===a.data.code?e.$Message.error("模板不存在"):"200"===a.data.code?e.$Message.error("分组不存在"):"300"===a.data.code?e.$Message.error("账户错误"):"400"===a.data.code&&e.$Message.error("json数据错误")}};console.log(a.param),this.queryOrderConfirm(a)},renewFun:function(t,e){var a=this,i={param:{autoRenewFlag:e,domainId:t},callback:function(t){if(a.loadingBtn=!1,!t)return!1;"1000"===t.data.code?(a.loadingBtn=!1,a.$Message.success("自动续费"+(1===e?"开启":"关闭")+"成功"),a.list[0].status=e):"100"===t.data.code?a.$Message.error("域名不存在"):"200"===t.data.code?a.$Message.error("商品不存在"):"300"===t.data.code?a.$Message.error("价格错误"):"400"===t.data.code?a.$Message.error("客户账号异常"):"600"===t.data.code&&a.$Message.error("信用额度不足")}};this.setAutoRenew(i)},updateFun:function(t,e){var a=this,i={param:{prohibitUpdate:e,domainId:t},callback:function(t){if(a.loadingBtn=!1,!t)return!1;"1000"===t.data.code&&(a.loadingBtn=!1,a.$Message.success("禁止更新"+(1===e?"开启":"关闭")+"成功"),a.list[1].status=e)}};this.setProhibitUpdate(i)},showLockFun:function(){this.onParentmethod()}},Object(n.b)({submitChange:o._78,setAutoRenew:o._57,setProhibitUpdate:o._68,queryOrderConfirm:o._35})),computed:s()({},Object(n.d)({maskClosable:function(t){return t.maskClosable}})),beforeMount:function(){this.list[0].id=this.detailData.id,this.list[1].id=this.detailData.id,this.list[2].id=this.detailData.id,this.list[0].status=this.detailData.renewFlag,this.list[1].status=this.detailData.updateFlag,this.list[2].status=this.detailData.backendLockFlag,this.list[2].time=this.detailData.backendExpireDate},watch:{}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"compDomainSafeDetail"},[a("div",{staticClass:"domainName"},[a("h2",[t._v(t._s(t.detailData.domainName)),a("Icon",{directives:[{name:"show",rawName:"v-show",value:1===t.detailData.importantFlag,expression:"detailData.importantFlag===1"}],style:1===t.detailData.importantFlag?"color:#f00":"",attrs:{type:"md-star"}})],1),t.showLock?t._e():a("span",{staticClass:"item"},[a("Icon",{attrs:{custom:"i-icon i-icon-renew1",size:"16"}}),t._v("自动续费："),a("em",{style:1===t.list[0].status?"color:#46a405":"color:#aaa"},[t._v(t._s(this.DATAS.RENEWFLAG[t.list[0].status]))])],1),t.showLock?t._e():a("span",{staticClass:"item"},[a("Icon",{attrs:{custom:"i-icon i-icon-prohibit",size:"16"}}),t._v("禁止更新："),a("em",{staticStyle:{color:"#aaa"},style:1===t.list[1].status?"color:#46a405":"color:#aaa"},[t._v(t._s(this.DATAS.UPDATEFLAG[t.list[1].status]))])],1),a("span",{staticClass:"item"},[a("Icon",{attrs:{custom:"i-icon i-icon-lock",size:"16"}}),t._v("注册局锁："),a("em",{style:1===t.list[2].status?"color:#46a405":"color:#aaa"},[t._v(t._s(this.DATAS.BACKENDLOCKFLAG[t.list[2].status]))])],1),a("Button",{directives:[{name:"show",rawName:"v-show",value:0===t.list[2].status&&t.showLock,expression:"list[2].status===0 && showLock"}],attrs:{type:"primary"},on:{click:function(e){t.drawerWorkOrderSubmit=!0}}},[t._v("开启注册局锁")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:1===t.list[2].status&&t.showLock,expression:"list[2].status===1 && showLock"}],attrs:{type:"primary"},on:{click:function(e){t.drawerWorkOrderSubmit=!0}}},[t._v("关闭注册局锁")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:3===t.list[2].status&&t.showLock,expression:"list[2].status===3 && showLock"}],attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){t.buyFun("new")}}},[t._v("购买服务")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:2!==t.list[2].status&&3!==t.list[2].status&&t.showLock,expression:"list[2].status!==2 && list[2].status!==3 && showLock"}],attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){t.buyFun("renew")}}},[t._v("续费服务")])],1),t.showLock?t._e():a("div",{staticClass:"secTable"},[a("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadingTable}})],1),t.showLock?a("div",{staticClass:"process"},[a("h3",[t._v("服务流程")]),t._m(0),t._m(1)]):t._e(),a("Drawer",{attrs:{closable:!0,width:"640",title:"提交工单","mask-closable":t.maskClosable},on:{"on-visible-change":t.drawerChange},model:{value:t.drawerWorkOrderSubmit,callback:function(e){t.drawerWorkOrderSubmit=e},expression:"drawerWorkOrderSubmit"}},[t.drawerWorkOrderSubmit?a("comp-work-order-submit",{attrs:{"on-close":t.closeDrawer,qaTypeDefaultValue:"7"}}):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text"},[this._v("1、购买注册局服务后，域名管家会主动与域名所在组负责人联系，验证身份无误后，开通注册局锁。注册局锁开通后将禁止此域名的修改、转移和删除。"),e("br"),this._v("2、若需对域名进行修改，需要联系管家进行身份确认，确认无误后管家会联系注册局暂时关闭注册局锁定，待修改完成后再次开启。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img"},[e("img",{attrs:{src:a("uGFW")}})])}]};var p={components:{compImportantSelect:u,compDomainSafeDetail:a("VU/8")(h,m,!1,function(t){a("zoJv")},null,null).exports,compAsideFilter:a("3OAA").a},data:function(){var t=this;return{value:"",refresh:!1,visible:!1,filterTitle:"域名安全服务",selectData:[],loadingTable:!0,loadingBtn:!1,showDetail:!1,showLock:!1,disabledSafeLv:!0,detailData:{},list:[],page:{pageNo:1,pagePages:1,pageItems:1},columns:[{type:"selection",width:60,align:"center"},{title:"域名",key:"domainName",className:"col1"},{title:"保护等级",key:"importantFlag",className:"col2",render:function(e,a){return e("div",[e("span",{},t.DATAS.IMPORTANT_FLAG[t.list[a.index].importantFlag])])}},{title:"自动续费",key:"renewFlag",className:"col3",render:function(e,a){return e("div",[e("span",{style:{color:(i=t,1===i.list[a.index].renewFlag?"#46a405":2===i.list[a.index].renewFlag?"#aaa":void 0)}},t.DATAS.RENEWFLAG[t.list[a.index].renewFlag])]);var i}},{title:"注册局锁",key:"backendLockFlag",className:"col4",render:function(e,a){return e("div",[e("span",{style:{color:(i=t,1===i.list[a.index].backendLockFlag?"#46a405":2===i.list[a.index].backendLockFlag?"#aaa":void 0)}},t.DATAS.BACKENDLOCKFLAG[t.list[a.index].backendLockFlag])]);var i}},{title:"禁止更新",key:"updateFlag",className:"col5",render:function(e,a){return e("div",[e("span",{style:{color:(i=t,1===i.list[a.index].updateFlag?"#46a405":2===i.list[a.index].updateFlag?"#aaa":void 0)}},t.DATAS.UPDATEFLAG[t.list[a.index].updateFlag])]);var i}},{title:"操作",key:"operate",className:"operate",render:function(e,a){return e("div",[e("a",{props:{href:"javascript:;"},on:{click:function(){t.showDetailFun(t.list[a.index])}}},"详情")])}}],asideFilterResult:{domainSuffixs:"",otherSuffix:"",allSuffix:"",groupIds:"",importantFlag:"",renewFlag:"",updateFlag:"",backendLockFlag:""}}},methods:s()({searchListData:function(){this.queryList(this.queryListParam({pageNum:1}))},pageChange:function(t){this.queryList(this.queryListParam({pageNum:t}))},toBackList:function(){this.searchListData(),this.showDetail=!1},toDetail:function(){this.showDetail=!0,this.showLock=!1},handleSelectAll:function(t){this.$refs.selection.selectAll(t)},tableSelectChange:function(t){this.selectData=t,this.disabledSafeLv=t.length},hidePop:function(){this.visible=!1},showDetailFun:function(t){this.detailData=t,this.showDetail=!0},parentMethod:function(){this.showLock=!0},asideFilterSubmit:function(t){console.log(t),this.asideFilterResult.allSuffix=t.dataDomainSuffix.checkAll?1:"",this.asideFilterResult.otherSuffix=!t.dataDomainSuffix.checkAll&&t.dataDomainSuffix.value.indexOf("otherSuffix")>=0?1:"",this.asideFilterResult.domainSuffixs=!t.dataDomainSuffix.checkAll&&t.dataDomainSuffix.value.indexOf("otherSuffix")<0?t.dataDomainSuffix.value.join(","):"",this.asideFilterResult.groupIds=t.dataMgmtCompany.reduce(function(t,e){return t.concat(e)},[]).join(","),this.asideFilterResult.importantFlag=t.dataSafe[0].join(","),this.asideFilterResult.renewFlag=t.dataSafe[1].join(","),this.asideFilterResult.backendLockFlag=t.dataSafe[2].join(","),this.asideFilterResult.updateFlag=t.dataSafe[3].join(","),console.log(this.asideFilterResult),this.queryList(this.queryListParam({pageNum:1}))},asideFilterReset:function(){this.asideFilterResult.domainSuffixs="",this.asideFilterResult.otherSuffix="",this.asideFilterResult.allSuffix="",this.asideFilterResult.groupIds="",this.asideFilterResult.importantFlag="",this.asideFilterResult.renewFlag="",this.asideFilterResult.updateFlag="",this.asideFilterResult.backendLockFlag="",this.queryList(this.queryListParam({pageNum:1}))},queryListParam:function(t){var e=this;return this.page.pageNo=t.pageNum,this.loadingBtn=!0,this.loadingTable=!0,{param:{pageNum:t.pageNum,pageSize:20,domainName:this.value,domainSuffixs:this.asideFilterResult.domainSuffixs,otherSuffix:this.asideFilterResult.otherSuffix,allSuffix:this.asideFilterResult.allSuffix,groupIds:this.asideFilterResult.groupIds,importantFlag:this.asideFilterResult.importantFlag,renewFlag:this.asideFilterResult.renewFlag,updateFlag:this.asideFilterResult.updateFlag,backendLockFlag:this.asideFilterResult.backendLockFlag},callback:function(t){if(e.loadingBtn=!1,e.loadingTable=!1,!t)return!1;"1000"===t.data.code&&(e.list=t.data.data.list,e.page.pageItems=t.data.data.totalNum)}}}},Object(n.b)({queryList:o._26})),computed:s()({getDomainId:function(){return console.log(this.selectData),this.selectData.map(function(t){return t.id}).join(",")}},Object(n.d)({maskClosable:function(t){return t.maskClosable}})),beforeMount:function(){},mounted:function(){this.queryList(this.queryListParam({pageNum:1}))}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contSecurityService"},[a("h1",{staticClass:"pageTitle clear"},[a("span",{staticClass:"backlist",on:{click:t.toBackList}},[t._v("域名安全服务")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showDetail,expression:"showDetail"}],staticClass:"backDetail",on:{click:t.toDetail}},[t._v(" > 实名信息详情")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showLock,expression:"showLock"}]},[t._v(" > 注册局锁")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetail,expression:"!showDetail"}],staticClass:"tR"},[a("span",[t._v("搜索")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入域名",name:""},model:{value:t.value,callback:function(e){t.value="string"==typeof e?e.trim():e},expression:"value"}}),a("Button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.searchListData}},[t._v("查询")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetail,expression:"!showDetail"}],staticClass:"secMain"},[a("div",{staticClass:"filter"},[a("comp-aside-filter",{attrs:{show:[4,8,9],total:t.page.pageItems,filterTitle:t.filterTitle},on:{asideFilterSubmit:t.asideFilterSubmit,asideFilterReset:t.asideFilterReset}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetail,expression:"!showDetail"}],staticClass:"secTable table1"},[a("Table",{ref:"selection",attrs:{columns:t.columns,data:t.list,loading:t.loadingTable},on:{"on-select":t.tableSelectChange,"on-select-cancel":t.tableSelectChange,"on-select-all":t.tableSelectChange,"on-select-all-cancel":t.tableSelectChange}}),a("div",{staticClass:"tableTool"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.handleSelectAll(!0)}}},[t._v("全选")]),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.handleSelectAll(!1)}}},[t._v("取消全选")]),a("Poptip",{attrs:{placement:"top",width:"240"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("Button",{staticClass:"btnSafeLv",attrs:{disabled:t.disabledSafeLv},on:{click:function(t){}}},[t._v("设置保护等级")]),a("comp-important-select",{attrs:{slot:"content","on-parentmethod":t.hidePop,domainIds:t.getDomainId},on:{refreshData:t.searchListData},slot:"content"})],1)],1)],1)]),a("Page",{directives:[{name:"show",rawName:"v-show",value:!t.showDetail,expression:"!showDetail"}],attrs:{total:t.page.pageItems,current:t.page.pageNo,"show-elevator":"show-elevator","show-total":"show-total","prev-text":"上一页","next-text":"下一页","page-size":20},on:{"on-change":t.pageChange}}),t.showDetail?a("comp-domain-safe-detail",{attrs:{showLock:t.showLock,"on-parentmethod":t.parentMethod,detailData:t.detailData},on:{refreshData:t.searchListData}}):t._e()],1)},staticRenderFns:[]};var g=a("VU/8")(p,f,!1,function(t){a("9nVB")},null,null);e.default=g.exports},fBNg:function(t,e){},uGFW:function(t,e,a){t.exports=a.p+"static/img/img_safe.4a475f7.png"},zoJv:function(t,e){}});
//# sourceMappingURL=19.bf7516be2dffb53ea620.js.map