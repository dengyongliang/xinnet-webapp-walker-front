webpackJsonp([29],{JtSp:function(t,e){},"Nn/s":function(t,e){},wuU7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),r=a.n(s),n=a("NYxO"),i=a("5reh"),o=a("5GVD"),l=a("XrW5"),c=a("naar"),u={components:{compInput:l.a,compSelect:o.a},props:{defaultValue:{type:String,default:""},onClose:{type:Function},userCode:{type:String,default:""}},data:function(){return{loadingBtn:!1,templateList:[]}},methods:r()({close:function(){this.onClose()},submitForm:function(){var t=this;this.loadingBtn=!0;var e=Object(c.a)([this.$refs.domain,this.$refs.templateId,this.$refs.groupId]),a=this.$refs.domain.value.replace(/[\n\r]/g,",").split(",");if(a.length>500)this.$refs.domain.showValidateResult({text:"最多允许一次提交500个域名！"}),e=!1;else for(var s=0;s<a.length;s++)if(!this.GLOBALS.IS_DOMAIN_AVAILABLE(a[s].split(" ")[0])){e=!1,this.$refs.domain.showValidateResult({text:"域名格式错误！"});break}if(e){var r={param:{templateId:this.$refs.templateId.value,groupId:this.$refs.groupId.value,jsonObj:this.$refs.domain.value.replace(/[\n\r]/g,",").split(",").map(function(t){return{domainName:t.split(" ")[0],domainPwd:t.split(" ")[1],orderGoodsType:5,orderType:4}})},callback:function(e){t.loadingBtn=!1,"1000"===e.data.code?(e.data.jsonObj.map(function(t){t.price=t.goodsNumAndPrice[0].price+"_"+t.goodsNumAndPrice[0].unit,t.num=t.goodsNumAndPrice[0].num,t.unit=t.goodsNumAndPrice[0].unit}),t.$store.commit(i._66,e.data),t.$router.push({path:"/payConfirm"})):"100"===e.data.code?t.$Message.error("模板不存在"):"200"===e.data.code?t.$Message.error("分组不存在"):"300"===e.data.code?t.$Message.error("账户错误"):"400"===e.data.code&&t.$Message.error("json数据错误")}};console.log(r.param),this.queryOrderConfirm(r)}else this.loadingBtn=!1}},Object(n.b)({queryOrderConfirm:i._35,queryTemplates:i._40})),computed:r()({},Object(n.d)({userAuthGroups:function(t){return this.GLOBALS.CONVERT_SELECT_GROUP(t.user.userAuthGroups.companys,{value:"id",label:"name",children:"groups"})}})),beforeMount:function(){var t=this,e={param:{},callback:function(e){"1000"===e.data.code&&(t.templateList=t.GLOBALS.CONVERT_SELECT(e.data.data,{label:"templateName",value:"id"}))}};this.queryTemplates(e)},watch:{}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"compDomainTransferIn"},[a("Alert",{staticClass:"alert1",attrs:{type:"warning","show-icon":"show-icon"}},[t._v("温馨提示："),a("Icon",{attrs:{slot:"icon",custom:"i-icon i-icon-notice_",size:"16"},slot:"icon"}),a("template",{slot:"desc"},[t._v("1、请将域名与转移密码用空格隔开，每行一个域名，最多可同时转入500个域名。"),a("br"),t._v("2、若转入失败，系统将自动退款。")])],2),a("Form",[a("FormItem",{attrs:{label:""}},[a("comp-input",{ref:"domain",attrs:{name:"domain",label:"域名",type:"textarea",styles:"width:100%;",placeholder:"域名 密码"}})],1),a("FormItem",{attrs:{label:""}},[a("span",{staticClass:"text"},[t._v("模板：")]),a("comp-select",{ref:"templateId",attrs:{name:"templateId",label:"模板",list:t.templateList}})],1),a("FormItem",{attrs:{label:""}},[a("span",{staticClass:"text"},[t._v("域名管理公司及分组：")]),a("comp-select",{ref:"groupId",attrs:{name:"groupId",label:"域名管理分组",list:t.userAuthGroups,optionGroup:!0}})],1),a("FormItem",{attrs:{label:""}},[a("Button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.submitForm}},[t._v("转入域名")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("Nn/s")},null,null).exports,p=a("PJh5"),f=a.n(p),h={components:{compSelect:o.a,compDomainTransferIn:m},data:function(){var t=this;return{value:"",times:[],statusList:[],refresh:!1,drawerTransferIn:!1,columns:[{title:"提交时间",key:"createTime",className:"col1",render:function(e,a){return e("div",[e("span",{},f()(t.list[a.index].createTime).format("YYYY-MM-DD HH:mm:ss"))])}},{title:"转入完成时间",key:"transferInTime",className:"col2"},{title:"域名",key:"domainName",className:"col3"},{title:"转入状态",key:"transferStatus",className:"col4",render:function(e,a){return 4===t.list[a.index].transferStatus?e("Tooltip",{props:{content:t.list[a.index].transferFaildReason,placement:"top"}},[e("Icon",{props:{custom:"i-icon i-icon-tips",size:"16"},style:{margin:"0 5px 0 0",color:"#48affe"}}),e("a",{props:{href:""},style:{color:"#f00"}},t.DATAS.DOMAIN_TRANSFER_STATUS[t.list[a.index].transferStatus])]):4!==t.list[a.index].transferStatus?e("div",[e("a",{props:{href:""}},t.DATAS.DOMAIN_TRANSFER_STATUS[t.list[a.index].transferStatus])]):void 0}}],list:[],loadingTable:!0,loadingBtn:!1,page:{pageNo:1,pagePages:1,pageItems:1}}},methods:r()({searchListData:function(){this.queryTransferInList(this.queryListParam({pageNum:1}))},pageChange:function(t){this.queryTransferInList(this.queryListParam({pageNum:t}))},closeDrawer:function(){this.drawerTransferIn=!1},drawerChange:function(){},queryListParam:function(t){var e=this;return this.page.pageNo=t.pageNum,this.loadingBtn=!0,this.loadingTable=!0,{param:{pageNum:t.pageNum,pageSize:20,domainName:this.value,transferStatus:this.$refs.transferStatus.value,createTimeBegin:""!==this.times[0]?f()(this.times[0]).format("YYYY-MM-DD")+" 00:00:00":"",createTimeEnd:""!==this.times[1]?f()(this.times[1]).format("YYYY-MM-DD")+" 23:59:59":""},callback:function(t){e.loadingBtn=!1,e.loadingTable=!1,"1000"===t.data.code&&(e.list=t.data.data.list,e.page.pageItems=t.data.data.totalNum)}}}},Object(n.b)({queryTransferInList:i._43})),computed:r()({},Object(n.d)({maskClosable:function(t){return t.maskClosable}})),beforeMount:function(){},mounted:function(){this.statusList=function(t){var e=[{label:"全部",value:""}];for(var a in t.DATAS.DOMAIN_TRANSFER_STATUS)e.push({label:t.DATAS.DOMAIN_TRANSFER_STATUS[a],value:parseInt(a)});return e}(this),this.queryTransferInList(this.queryListParam({pageNum:1}))}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contDomainTransferIn"},[a("h1",{staticClass:"pageTitle clear"},[t._v("域名转入管理")]),a("div",{staticClass:"secFilter"},[a("form",{ref:"exportForm",staticClass:"filterWrap"},[a("table",[a("tr",{staticClass:"row1"},[a("td",{staticClass:"td1"},[a("span",{staticClass:"n"},[t._v("搜索：")]),a("div",{staticClass:"inputWrap"},[a("Input",{attrs:{placeholder:"请输入域名"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]),a("td",{staticClass:"td2"},[a("span",{staticClass:"n"},[t._v("提交时间：")]),a("div",{staticClass:"inputWrap"},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:"全部",format:"yyyy-MM-dd"},on:{"on-change":function(e){t.time=e}},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}})],1)]),a("td",{staticClass:"td3"},[a("span",{staticClass:"n"},[t._v("状态：")]),a("div",{staticClass:"inputWrap"},[a("comp-select",{ref:"transferStatus",attrs:{list:t.statusList,styles:"width:100%"}})],1)]),a("td",{staticClass:"tdBtn"},[a("Button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.searchListData}},[t._v("查询")]),a("Button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){t.drawerTransferIn=!0}}},[t._v("提交转入")])],1)])])])]),a("div",{staticClass:"secMain"},[a("div",{staticClass:"secTable"},[a("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadingTable}})],1)]),a("Page",{attrs:{total:t.page.pageItems,current:t.page.pageNo,"show-elevator":"show-elevator","show-total":"show-total","prev-text":"上一页","next-text":"下一页","page-size":20},on:{"on-change":t.pageChange}}),a("Drawer",{attrs:{closable:!0,width:"650",title:"提交转入","mask-closable":t.maskClosable},on:{"on-visible-change":t.drawerChange},model:{value:t.drawerTransferIn,callback:function(e){t.drawerTransferIn=e},expression:"drawerTransferIn"}},[t.drawerTransferIn?a("comp-domain-transfer-in",{attrs:{"on-close":t.closeDrawer}}):t._e()],1)],1)},staticRenderFns:[]};var v=a("VU/8")(h,g,!1,function(t){a("JtSp")},"data-v-fede3bde",null);e.default=v.exports}});
//# sourceMappingURL=29.682a46fd49b9320f4912.js.map