webpackJsonp([23],{D2jb:function(e,t){},Q0W4:function(e,t){},R42g:function(e,t,a){e.exports=a.p+"static/img/idCard.19ece10.png"},v6Oj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("NYxO"),n=a("5reh"),l=a("woOf"),o=a.n(l),c=a("vyg+"),u=a("5GVD"),m=a("XrW5"),d=a("i7p3"),p=a("zhkS"),h=a("naar"),v={components:{compRadio:c.a,compSelect:u.a,compInput:m.a,compImgUpload:d.a},props:{onClose:{type:Function},templateList:{type:Array,default:function(){return{data:[]}}},domainIds:{type:String,default:""},organizeNameCn:{type:String,default:""}},data:function(){return{loadingBtn:!1,status:"creat",modify:!1,isTemp:null,registrantType:"I",idTypeListI:[],idTypeListE:[],registrantTypeList:[{label:"个人",value:"I"},{label:"企业",value:"E"}],isTempList:[{value:"使用模板资料",label:"1"},{value:"上传资料",label:"0"}],uploadAction:p._84}},methods:s()({close:function(){this.onClose()},changeUploadStatus:function(){this.status="modify",this.modify=!0},isTempChange:function(e){this.isTemp=1*e.value},registrantChange:function(e){this.registrantType=e},formSubmit:function(){var e=this;this.loadingBtn=!0;var t=!1;if(0===this.isTemp?t=Object(h.a)([this.$refs.registrantType,this.$refs["idType"+this.registrantType],this.$refs.idCode,this.$refs.upfile]):1===this.isTemp&&(t=Object(h.a)([this.$refs.templateId])),t){var a={param:{domainIds:this.domainIds},callback:function(t){if(e.loadingBtn=!1,!t)return!1;"1000"===t.data.code?(e.$Message.success("模板资料提交成功"),e.$emit("refreshData")):e.$Message.error("模板资料提交失败")}};0===this.isTemp?o()(a.param,{registrantType:this.$refs.registrantType.value,idCode:this.$refs.idCode.value,idType:this.$refs["idType"+this.registrantType].value,idFileUrl:this.$refs.upfile.$refs.upload.fileList[0].file,idFileName:this.$refs.upfile.$refs.upload.fileList[0].name}):1===this.isTemp&&o()(a.param,{templateId:this.$refs.templateId.value}),console.log(a.param),this.submitDomainVerify(a)}else this.loadingBtn=!1}},Object(r.b)({queryOrderConfirm:n._35,submitDomainVerify:n._79})),computed:{},beforeMount:function(){this.idTypeListI=function(e){var t=[];for(var a in e.DATAS.REGISTRANT_ID_TYPE_I)t.push({label:e.DATAS.REGISTRANT_ID_TYPE_I[a],value:a});return t}(this),this.idTypeListE=function(e){var t=[];for(var a in e.DATAS.REGISTRANT_ID_TYPE_E)t.push({label:e.DATAS.REGISTRANT_ID_TYPE_E[a],value:a});return t}(this)},watch:{}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"realNameDetail"},[e._m(0),i("Form",{attrs:{"label-width":200}},[i("FormItem",{attrs:{label:"域名所有者："}},[i("span",{staticClass:"text"},[e._v(e._s(e.organizeNameCn))])]),i("FormItem",{attrs:{label:"是否使用模板资料："}},[i("comp-radio",{ref:"isTemp",attrs:{name:"isTemp",list:e.isTempList,onParentmethod:e.isTempChange}})],1),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:1===e.isTemp,expression:"isTemp===1"}],attrs:{label:"模板：",required:"required"}},[i("comp-select",{ref:"templateId",attrs:{name:"templateId",list:e.templateList,styles:"width:240px"}})],1),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===e.isTemp,expression:"isTemp===0"}],attrs:{label:"域名所有者类型：",required:"required"}},[i("comp-select",{ref:"registrantType",attrs:{name:"registrantType",list:e.registrantTypeList,styles:"width:240px",defaultValue:e.registrantType,onParentmethod:e.registrantChange}})],1),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===e.isTemp,expression:"isTemp===0"}],attrs:{label:"证件类型：",required:"required"}},[i("compSelect",{directives:[{name:"show",rawName:"v-show",value:"I"===e.registrantType,expression:"registrantType==='I'"}],ref:"idTypeI",attrs:{styles:"width:300px;",list:e.idTypeListI}}),i("compSelect",{directives:[{name:"show",rawName:"v-show",value:"E"===e.registrantType,expression:"registrantType==='E'"}],ref:"idTypeE",attrs:{styles:"width:300px;",list:e.idTypeListE}})],1),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===e.isTemp,expression:"isTemp===0"}],attrs:{label:"域名所有者证件号码：",required:"required"}},[i("comp-input",{ref:"idCode",attrs:{name:"idCode",label:"域名所有者证件号码",styles:"width:300px",maxLength:100}})],1),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===e.isTemp,expression:"isTemp===0"}],attrs:{label:"域名所有人证件扫描件：",required:"required"}},[i("comp-img-upload",{ref:"upfile",attrs:{name:"upfile",errorText:"请上传证件扫描件！",tips:"支持jpg、jpge格式，图片需大于50k，小于1M",uploadAction:e.uploadAction,"on-beforecallback":e.changeUploadStatus,creatText:"点击上传",status:e.status,modify:e.modify}},[i("p",{attrs:{slot:"unit"},slot:"unit"},[e._v("请确保上传的"),i("span",{staticStyle:{color:"#f00"}},[e._v("证件图片与证件类型及证件号码完全一致")]),e._v("；若不一致将会导致域名实名不通过")]),i("p",{staticClass:"example",attrs:{slot:"last"},slot:"last"},[i("span",[e._v("示例")]),i("img",{attrs:{src:a("R42g")}})])])],1),i("FormItem",{directives:[{name:"show",rawName:"v-show",value:null!==e.isTemp,expression:"isTemp!==null"}],attrs:{label:""}},[i("Button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.formSubmit}},[e._v("下一步")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"status"},[this._v("实名状态："),t("em",{staticStyle:{color:"#f00"}},[this._v("审核不通过")]),t("p",[this._v("审核失败原因：3.1 未提交注册者身份证明资料或未提交合格的注册者身份证明资料, 个人请提交带有姓名和身份证号的身份证件（建议提交身份证），组织请提交组织机构代码证或者营业执照复印件、扫描件")])])}]};var g={components:{compDomainRealNameDetail:a("VU/8")(v,f,!1,function(e){a("D2jb")},null,null).exports,compAsideFilter:a("3OAA").a},data:function(){var e=this;return{value:"",refresh:!1,filterTitle:"实名制管理",selectData:[],organizeNameCn:"",btnRealNameDisabled:!0,btnUpdateStatusDisabled:!0,loadingTable:!0,loadingBtn:!1,templateList:[],list:[],userCompanys:[],domainIds:"",showSubmit:!1,asideFilterResult:{groupIds:"",serviceState:"",rnvcStatus:"",dnvcStatus:"",verifyDay:"",verifyTimeBegin:"",verifyTimeEnd:""},page:{pageNo:1,pagePages:1,pageItems:1},columns:[{type:"selection",width:60,align:"center"},{title:"域名",key:"domainName",className:"col1"},{title:"域名所有者",key:"organizeNameCn",className:"col2"},{title:"联系邮箱",key:"userEmail",className:"col3"},{title:"提交日期",key:"verifyTime",className:"col4"},{title:"实名状态",key:"rnvcStatus",className:"col5",render:function(t,a){return 3===e.list[a.index].rnvcStatus?t("Tooltip",{props:{content:e.list[a.index].rnvcFaildReason,placement:"top"}},[t("Icon",{props:{custom:"i-icon i-icon-tips",size:"16"},style:{margin:"0 5px 0 0",color:"#48affe"}}),t("a",{props:{href:""},style:{color:"#f00"}},"审核拒绝")]):t("div",[t("span",{},e.DATAS.REAL_NAME_VERIFY_STATUS[e.list[a.index].rnvcStatus])])}},{title:"命名状态",key:"dnvcStatus",className:"col6",render:function(t,a){return 3===e.list[a.index].dnvcStatus?t("Tooltip",{props:{content:e.list[a.index].dnvcFaildReason,placement:"top"}},[t("Icon",{props:{custom:"i-icon i-icon-tips",size:"16"},style:{margin:"0 5px 0 0",color:"#48affe"}}),t("a",{props:{href:""},style:{color:"#f00"}},"审核拒绝")]):t("div",[t("span",{},e.DATAS.DOMAIN_NAME_VERIFY_STATUS[e.list[a.index].dnvcStatus])])}},{title:"操作",key:"operate",className:"operate",render:function(t,a){if(0===e.list[a.index].rnvcStatus||3===e.list[a.index].rnvcStatus)return t("div",[t("a",{props:{href:"javascript:;"},on:{click:function(){e.showRealNameSubmit(e.list[a.index])}}},"提交资料")])}}]}},methods:s()({searchListData:function(){this.showSubmit=!1,this.btnRealNameDisabled=!0,this.btnUpdateStatusDisabled=!0,this.queryList(this.queryListParam({pageNum:1}))},pageChange:function(e){this.queryList(this.queryListParam({pageNum:e}))},toBackList:function(){this.showSubmit=!1},showRealNameSubmit:function(e){this.selectData=[e],this.organizeNameCn=e.organizeNameCn,this.showSubmit=!0},handleSelectAll:function(e){this.$refs.selection.selectAll(e)},tableSelectChange:function(e){this.selectData=e,this.btnUpdateStatusDisabled=!e.length;var t,a=!1;e.length>1?this.btnRealNameDisabled=(t=this,e.reduce(function(e,i){return e.organizeNameCn!==i.organizeNameCn&&(t.$Message.error("不同域名所有者，请重选"),a=!0),1!==e.rnvcStatus&&2!==e.rnvcStatus&&1!==i.rnvcStatus&&2!==i.rnvcStatus||(t.$Message.error("审核状态不符，请重选"),a=!0),i}),a):1===e.length&&(1===e[0].rnvcStatus||2===e[0].rnvcStatus?(this.$Message.error("审核状态不符，请重选"),this.btnRealNameDisabled=!0):this.btnRealNameDisabled=!1)},batchRealName:function(){this.organizeNameCn=this.selectData[0].organizeNameCn,this.showSubmit=!0},batchUpdate:function(){var e=this;this.loadingBtn=!0;var t={param:{domainIds:this.getDomainId},callback:function(t){if(e.loadingBtn=!1,!t)return!1;"1000"===t.data.code?(e.$Message.success("更新成功"),e.searchListData()):e.$Message.error("更新失败")}};this.updateDomainAuditStatus(t)},asideFilterSubmit:function(e){console.log(e),this.asideFilterResult.groupIds=e.dataMgmtCompany.reduce(function(e,t){return console.log(e),console.log(t),e.concat(t)},[]).join(","),this.asideFilterResult.serviceState=e.dataServiceState.join(","),this.asideFilterResult.rnvcStatus=e.dataRealName.join(","),this.asideFilterResult.dnvcStatus=e.dataNamingState.join(","),this.asideFilterResult.verifyDay="custom"===e.dataTimeSubmit.value?"":e.dataTimeSubmit.value,this.asideFilterResult.verifyTimeBegin="custom"===e.dataTimeSubmit.value?e.dataTimeSubmit.time[0]:"",this.asideFilterResult.verifyTimeEnd="custom"===e.dataTimeSubmit.value?e.dataTimeSubmit.time[1]:"",this.queryList(this.queryListParam({pageNum:1}))},asideFilterReset:function(){this.asideFilterResult.groupIds="",this.asideFilterResult.serviceState="",this.asideFilterResult.rnvcStatus="",this.asideFilterResult.dnvcStatus="",this.asideFilterResult.verifyDay="",this.asideFilterResult.verifyTimeBegin="",this.asideFilterResult.verifyTimeEnd="",this.queryList(this.queryListParam({pageNum:1}))},queryListParam:function(e){var t=this;return this.page.pageNo=e.pageNum,this.loadingBtn=!0,this.loadingTable=!0,{param:{pageNum:e.pageNum,pageSize:20,domainName:this.value,groupIds:this.asideFilterResult.groupIds,serviceState:this.asideFilterResult.serviceState,rnvcStatus:this.asideFilterResult.rnvcStatus,dnvcStatus:this.asideFilterResult.dnvcStatus,verifyDay:this.asideFilterResult.verifyDay,verifyTimeBegin:this.asideFilterResult.verifyTimeBegin,verifyTimeEnd:this.asideFilterResult.verifyTimeEnd},callback:function(e){if(t.loadingBtn=!1,t.loadingTable=!1,!e)return!1;"1000"===e.data.code&&(t.list=e.data.data.list,t.page.pageItems=e.data.data.totalNum)}}}},Object(r.b)({queryList:n._30,queryTemplates:n._40,updateDomainAuditStatus:n._86})),computed:s()({getDomainId:function(){return console.log(this.selectData),this.selectData.map(function(e){return e.id}).join(",")}},Object(r.d)({maskClosable:function(e){return e.maskClosable}})),beforeMount:function(){var e=this,t={param:{},callback:function(t){if(!t)return!1;"1000"===t.data.code&&(e.templateList=e.GLOBALS.CONVERT_SELECT(t.data.data,{label:"templateName",value:"id"}))}};this.queryTemplates(t)},mounted:function(){this.queryList(this.queryListParam({pageNum:1}))}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contRealNameDomain"},[a("h1",{staticClass:"pageTitle clear"},[a("span",{staticClass:"backlist",on:{click:e.toBackList}},[e._v("域名实名制管理")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showSubmit,expression:"showSubmit"}]},[e._v(" > 实名信息详情")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSubmit,expression:"!showSubmit"}],staticClass:"tR"},[a("span",[e._v("搜索")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入域名/域名所有者",name:""},model:{value:e.value,callback:function(t){e.value="string"==typeof t?t.trim():t},expression:"value"}}),a("Button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.searchListData}},[e._v("查询")])],1)]),a("div",{staticClass:"secMain"},[a("Alert",{staticClass:"alert1",attrs:{type:"warning","show-icon":"show-icon"}},[e._v("温馨提示："),a("Icon",{attrs:{slot:"icon",custom:"i-icon i-icon-notice_",size:"16"},slot:"icon"}),a("template",{slot:"desc"},[e._v("1、请准确上传与域名所有人证件号码一致的扫描件或照片，证件需要在有效期内。"),a("br"),e._v("2、请准确选择域名所有人证件类型，避免由于证件类型不符影响网站备案审核。"),a("br"),e._v("3、可使用已保存模板信息快速填充，但仍需进行实名审核。")])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSubmit,expression:"!showSubmit"}],staticClass:"filter"},[a("comp-aside-filter",{attrs:{show:[3,4,11,12,13],total:e.page.pageItems,filterTitle:e.filterTitle},on:{asideFilterSubmit:e.asideFilterSubmit,asideFilterReset:e.asideFilterReset}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSubmit,expression:"!showSubmit"}],staticClass:"secTable"},[a("Table",{ref:"selection",attrs:{columns:e.columns,data:e.list,loading:e.loadingTable},on:{"on-select":e.tableSelectChange,"on-select-cancel":e.tableSelectChange,"on-select-all":e.tableSelectChange,"on-select-all-cancel":e.tableSelectChange}}),a("div",{staticClass:"tableTool"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.handleSelectAll(!0)}}},[e._v("全选")]),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.handleSelectAll(!1)}}},[e._v("取消全选")]),a("Button",{attrs:{disabled:e.btnRealNameDisabled},on:{click:e.batchRealName}},[e._v("批量实名")]),a("Button",{attrs:{disabled:e.btnUpdateStatusDisabled},on:{click:e.batchUpdate}},[e._v("更新状态")])],1)],1)],1),a("Page",{directives:[{name:"show",rawName:"v-show",value:!e.showSubmit,expression:"!showSubmit"}],attrs:{total:e.page.pageItems,current:e.page.pageNo,"show-elevator":"show-elevator","show-total":"show-total","prev-text":"上一页","next-text":"下一页","page-size":20},on:{"on-change":e.pageChange}}),e.showSubmit?a("comp-domain-real-name-detail",{attrs:{templateList:e.templateList,organizeNameCn:e.organizeNameCn,domainIds:e.getDomainId},on:{refreshData:e.searchListData}}):e._e()],1)},staticRenderFns:[]};var T=a("VU/8")(g,b,!1,function(e){a("Q0W4")},null,null);t.default=T.exports}});
//# sourceMappingURL=23.45106c95acffd7f6db99.js.map