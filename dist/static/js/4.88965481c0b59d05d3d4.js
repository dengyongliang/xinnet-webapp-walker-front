webpackJsonp([4],{"/eII":function(t,a){},"0p9j":function(t,a){},Cdx3:function(t,a,e){var i=e("sB3e"),n=e("lktj");e("uqUo")("keys",function(){return function(t){return n(i(t))}})},TzG4:function(t,a){},WFhL:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("fZjL"),n=e.n(i),s=e("Dd8w"),r=e.n(s),o=e("NYxO"),c=e("5reh"),d={name:"compChartSpendTrend",props:{charData:{type:Object,default:function(){return{data:[]}}}},data:function(){return{}},methods:{drawChart:function(t){this.$echarts.init(document.getElementById("myChart2")).setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{x:"center",y:"bottom",data:this.charData.legend},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:this.charData.xAxis,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value"},series:this.charData.series})}},beforeMount:function(){},mounted:function(){},computed:{},watch:{charData:function(t,a){this.drawChart(t)}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"chartTrend",staticStyle:{height:"400px"},attrs:{id:"myChart2"}})])}]};var u=e("VU/8")(d,l,!1,function(t){e("/eII")},"data-v-6f699b53",null).exports,m={name:"compChartSpendTotal",props:{charData:{type:Object,default:function(){return{data:[]}}}},data:function(){return{}},methods:{drawChart:function(t){this.$echarts.init(document.getElementById("myChart")).setOption({title:{text:"",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",right:"12%",top:"center",data:this.charData.legend},series:[{name:"访问来源",type:"pie",radius:"70%",center:["30%","50%"],data:this.charData.series,label:{normal:{show:!0,position:"inner",formatter:"{d}%"}},labelLine:{normal:{show:!1}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}},beforeMount:function(){},mounted:function(){},computed:{},watch:{charData:function(t,a){this.drawChart(t)}}},p={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"chartCount",staticStyle:{width:"450px",height:"300px"},attrs:{id:"myChart"}})},staticRenderFns:[]};var h=e("VU/8")(m,p,!1,function(t){e("TzG4")},"data-v-d97ee1de",null).exports,y=e("PJh5"),f=e.n(y),v={components:{compChartSpendTrend:u,compChartSpendTotal:h},data:function(){var t=this;return{time1:[new Date(f()().subtract(1,"months").format("YYYY-MM-DD")+" 00:00:00"),new Date(f()(new Date).format("YYYY-MM-DD")+" 23:59:59")],time2:[new Date(f()().subtract(1,"years").format("YYYY-MM-DD")+" 00:00:00"),new Date(f()(new Date).format("YYYY-MM-DD")+" 23:59:59")],loadingTable:!1,loadingBtn:!1,columns:[{title:"产品名称",key:"orderGoodsType",className:"col1",render:function(a,e){return a("div",[a("span",{},t.DATAS.ORDER_GOODS_TYPE[t.list[e.index].orderGoodsType])])}},{title:"消费金额",key:"orderTotalMoney",className:"col2",render:function(a,e){return a("div",[a("span",{},t.list[e.index].orderTotalMoney+" 元")])}},{title:"信用消费",key:"orderCreditMoney",className:"col3",render:function(a,e){return a("div",[a("span",{},t.list[e.index].orderCreditMoney+" 元")])}},{title:"预付费消费",key:"orderPayMoney",className:"col4",render:function(a,e){return a("div",[a("span",{},t.list[e.index].orderPayMoney+" 元")])}},{title:"操作",key:"operate",className:"operate",render:function(a,e){return a("div",[a("a",{props:{href:"javascript:;"},on:{click:function(){t.toOrderMgmt({orderGoodsType:t.list[e.index].orderGoodsType,startTime:""!==t.time1[0]?f()(t.time1[0]).format("YYYY-MM-DD")+" 00:00:00":"",endTime:""!==t.time1[1]?f()(t.time1[1]).format("YYYY-MM-DD")+" 23:59:59":""})}}},"详情")])}}],list:[],creditMoney:"0.00",payMoney:"0.00",totalMoney:"0.00",payStatisticsTrendData:{},payStatisticsTotalData:{}}},methods:r()({toOrderMgmt:function(t){this.$router.push({path:"/order/orderMgmt",query:{orderGoodsType:t.orderGoodsType,startTime:t.startTime,endTime:t.endTime}})},getFinancePayStatisticsParam:function(t){var a=this;return this.loadingTable=!0,{param:{startTime:""!==this.time1[0]?f()(this.time1[0]).format("YYYY-MM-DD")+" 00:00:00":"",endTime:""!==this.time1[1]?f()(this.time1[1]).format("YYYY-MM-DD")+" 23:59:59":""},callback:function(t){if(a.loadingTable=!1,!t)return!1;if("1000"===t.data.code){a.creditMoney=t.data.data.creditMoney,a.payMoney=t.data.data.payMoney,a.totalMoney=t.data.data.totalMoney,a.list=t.data.data.list;var e={legend:[]};e.series=t.data.data.businessList.map(function(t,i,s){var r=a.DATAS.BUSINESS_LIST[n()(t)];return e.legend.push(r),{name:r,value:t[n()(t)]}}),a.payStatisticsTotalData=e}else"900"===t.data.code&&a.$Message.error("查询失败")}}},getFinancePayStatisticsTrendParam:function(t){var a=this;return this.loadingBtn=!0,{param:{startTime:""!==this.time2[0]?f()(this.time2[0]).format("YYYY-MM-DD")+" 00:00:00":"",endTime:""!==this.time2[1]?f()(this.time2[1]).format("YYYY-MM-DD")+" 23:59:59":""},callback:function(t){if(a.loadingBtn=!1,!t)return!1;"1000"===t.data.code?(a.payStatisticsTrendData={legend:[],xAxis:[],series:[]},a.payStatisticsTrendData.xAxis=t.data.data.dateList,a.payStatisticsTrendData.series=t.data.data.goodTypeList.map(function(e,i,n){a.payStatisticsTrendData.legend.push(a.DATAS.ORDER_GOODS_TYPE[e]);var s=[];return t.data.data.dateList.forEach(function(a,i){if(!t.data.data.result[a])return s.push(0);t.data.data.result[a].forEach(function(t,a){t.orderGoodsType===parseInt(e)&&s.push(t.orderTotalMoney)})}),{name:a.DATAS.ORDER_GOODS_TYPE[e],type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},data:s}})):"900"===t.data.code&&a.$Message.error("查询失败")}}},queryPayStatistics:function(){this.financePayStatistics(this.getFinancePayStatisticsParam())},queryPayStatisticsTrend:function(){this.financePayStatisticsTrend(this.getFinancePayStatisticsTrendParam())}},Object(o.b)({financePayStatistics:c.q,financePayStatisticsTrend:c.r})),computed:{},beforeMount:function(){this.financePayStatistics(this.getFinancePayStatisticsParam()),this.financePayStatisticsTrend(this.getFinancePayStatisticsTrendParam())},mounted:function(){}},D={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"contOverview"},[e("h1",{staticClass:"pageTitle clear"},[t._v("财务总览")]),e("div",{staticClass:"secMain"},[e("div",{staticClass:"sec count"},[e("div",{staticClass:"t clear"},[e("span",{staticClass:"text"},[t._v("消费统计")]),e("div",{staticClass:"r"},[e("span",{staticClass:"text"},[t._v("统计日期")]),e("DatePicker",{attrs:{type:"daterange",placeholder:"",format:"yyyy-MM-dd",placement:"bottom-end"},on:{"on-change":function(a){t.time=a}},model:{value:t.time1,callback:function(a){t.time1=a},expression:"time1"}}),e("Button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.queryPayStatistics}},[t._v("查询")])],1)]),e("div",{staticClass:"c"},[e("Row",[e("Col",{staticClass:"data",attrs:{span:"12"}},[e("div",{staticClass:"colWrap"},[e("table",[e("tr",[e("td",{staticClass:"col1"},[t._v("信用消费：")]),e("td",{staticClass:"col2"},[t._v(t._s(t.creditMoney)+" 元")])]),e("tr",[e("td",{staticClass:"col1"},[t._v("预付费消费：")]),e("td",{staticClass:"col2"},[t._v(t._s(t.payMoney)+" 元")])])]),e("Divider",{attrs:{dashed:"dashed"}}),e("table",[e("tr",[e("td",{staticClass:"col1"},[t._v("消费总额：")]),e("td",{staticClass:"col2"},[e("em",[t._v(t._s(t.totalMoney))]),t._v(" 元")])])])],1)]),e("Col",{staticClass:"chart",attrs:{span:"12"}},[e("div",{staticClass:"colWrap"},[e("comp-chart-spend-total",{attrs:{charData:t.payStatisticsTotalData}})],1)])],1)],1),e("div",{staticClass:"secTable"},[e("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadingTable}})],1)]),e("div",{staticClass:"sec trend"},[e("div",{staticClass:"t clear"},[e("span",{staticClass:"text"},[t._v("消费趋势")]),e("div",{staticClass:"r"},[e("span",{staticClass:"text"},[t._v("统计日期")]),e("DatePicker",{attrs:{type:"daterange",placeholder:"",format:"yyyy-MM-dd",placement:"bottom-end"},on:{"on-change":function(a){t.time=a}},model:{value:t.time2,callback:function(a){t.time2=a},expression:"time2"}}),e("Button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.queryPayStatisticsTrend}},[t._v("查询")])],1)]),e("comp-chart-spend-trend",{attrs:{charData:t.payStatisticsTrendData}})],1)])])},staticRenderFns:[]};var T=e("VU/8")(v,D,!1,function(t){e("0p9j")},null,null);a.default=T.exports},fZjL:function(t,a,e){t.exports={default:e("jFbC"),__esModule:!0}},jFbC:function(t,a,e){e("Cdx3"),t.exports=e("FeBl").Object.keys},uqUo:function(t,a,e){var i=e("kM2E"),n=e("FeBl"),s=e("S82l");t.exports=function(t,a){var e=(n.Object||{})[t]||Object[t],r={};r[t]=a(e),i(i.S+i.F*s(function(){e(1)}),"Object",r)}}});
//# sourceMappingURL=4.88965481c0b59d05d3d4.js.map